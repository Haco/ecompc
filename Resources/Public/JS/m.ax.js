function addAjaxLoader(e){$(e).addClass("ajaxloader")}function remAjaxLoader(e){$(e).removeClass("ajaxloader")}function goBackToIndex(){$("#tx-ecompc-ajax-header-instructions").show(),$("#tx-ecompc-ajax-header-backlink").hide(),$("#tx-ecompc-package-select-option-index").hide(),$("#tx-ecompc-package-select-index").fadeIn()}function ajaxCaller(e,t,n,r,i,s,o){addAjaxLoader(t);var u=e.replace(" ","").split(",");$.ajax({async:"true",url:"index.php",type:"POST",dataType:"json",data:{eID:"EcomProductConfigurator",id:n,L:r,type:1407764086,request:i},success:s?s:function(e){remAjaxLoader(t);if(u.length)for(key in u){var n=u[key].split(":");$(n[0]).html(e[n[1]]).fadeIn()}onAjaxSuccessGeneric(e,e["action"]=="updatePackages"),onAjaxSuccessUpdateIndex(e),onAjaxSuccessUpdatePackages(e),o&&ajaxCaller("","#tx-ecompc-ajax-loader",e.pid,e.L,{actionName:"updatePackages",arguments:{cObj:e.cObj}});switch(e.proceed){case"index":goBackToIndex();break;case"selectPackageOptions":ajaxCaller("#tx-ecompc-package-select-option-index:content","#tx-ecompc-ajax-loader",e.pid,e.L,{actionName:"selectPackageOptions",arguments:{configurationPackage:e["package"],cObj:e.cObj}});break;default:}e["action"]=="selectPackageOptions"&&initTriggerHint()},error:function(e,t,n){console.log("Request failed with "+t+": "+n+"!")}})}function onAjaxSuccessUpdatePackages(e){e["action"]=="updatePackages"&&e.cfgres&&($("#ecom-configurator-result-canvas").html(e.cfgres).fadeIn(),function(e){var t=e("#tx-ecompc-canvas .ecom-configurator-summary-table");e("#tx-ecompc-canvas .ecom-configurator-result-review-config").on("click",function(n){n.preventDefault(),e(this).stop().toggleClass("active"),t.stop().slideToggle("slow").toggleClass("active"),t.hasClass("active")&&e("html, body").stop().animate({scrollTop:t.offset().top},"slow")})}(jQuery))}function onAjaxSuccessUpdateIndex(e){if(e.packagesLinksInnerHTML)for(key in e.packagesLinksInnerHTML){var t=$("#tx-ecompc-configure-package-"+key);$("#tx-ecompc-configure-package-"+key+" > .ecom-configurator-package-select").html(e.packagesLinksInnerHTML[key][2]),e.packagesLinksInnerHTML[key][0]?t.removeClass("inactive-package").addClass("active-package"):t.removeClass("active-package").addClass("inactive-package"),e.packagesLinksInnerHTML[key][1]?t.children(".ecom-configurator-package-state").removeClass("unchecked").addClass("checked"):t.children(".ecom-configurator-package-state").removeClass("checked").addClass("unchecked")}e.selcps<tcp&&$("#ecom-configurator-result-canvas").html("").hide()}function onAjaxSuccessGeneric(e,t){$("#ecom-configurator-process-value").animate({value:e.selcps/tcp}),$(".ecom-configurator-process-value-print").each(function(t,n){$({countNum:$(n).text()}).animate({countNum:Math.floor(e.selcps/tcp*100)},{duration:800,easing:"linear",step:function(){$(n).text(Math.floor(this.countNum))},complete:function(){$(n).text(this.countNum)}})}),e.cfgp&&$("#tx-ecompc-config-header-cfgp").html(e.cfgp),t||($("#tx-ecompc-ajax-header-instructions").hide(),$("#tx-ecompc-ajax-header-backlink").css("display","inline-block"))}function updatePackage(e,t,n,r,i){var s={actionName:"setOption",arguments:{cObj:n,opt:r,uns:i}};ajaxCaller("","#tx-ecompc-ajax-loader",e,t,s,null,1)}function resetPackage(e,t,n,r){var i={actionName:"resetPackage",arguments:{cObj:n,"package":r}};ajaxCaller("","#tx-ecompc-ajax-loader",e,t,i,function(e){remAjaxLoader("#tx-ecompc-ajax-loader"),onAjaxSuccessGeneric(e),onAjaxSuccessUpdateIndex(e),ajaxCaller("#tx-ecompc-package-select-option-index:content","#tx-ecompc-ajax-loader",e.pid,e.L,{actionName:"selectPackageOptions",arguments:{configurationPackage:e["package"],cObj:e.cObj}},null,1)})}function initTriggerHint(){function o(e){$(e).fadeOut("fast",function(){$(this).css({display:"none",opacity:0,top:0})})}var e="#tx-ecompc-canvas .ecom-configurator-select-package-option-info",t="#tx-ecompc-canvas .ecom-configurator-select-package-option-info-hint-box",n,r,i,s;$(e).on("click",function(){return o(t),n=$(document).height(),s=$(this).parents(".ecom-configurator-select-package-option-wrap").next(".ecom-configurator-select-package-option-info-hint-box"),r=$(s).outerHeight(),n<=r?i=15:i=(n-r)/2,s.css("display","block").animate({top:i,opacity:1},"fast"),!1}),$("#tx-ecompc-canvas .ecom-configurator-select-package-option-info-hint-box .close-popover-x, #tx-ecompc-canvas .ecom-configurator-select-package-option-info-hint-box, body").on("click keyup",function(e){e.type=="keyup"?e.keyCode==27&&o(t):o(t)})}(function(){$(".ecom-configurator-package-box").on("click",function(e){e.preventDefault();if($(this).hasClass("inactive-package"))return;var t=$(this).attr("data-page"),n=$(this).attr("data-package"),r=$(this).attr("data-cObj"),i=$(this).attr("data-lang"),s={actionName:"selectPackageOptions",arguments:{configurationPackage:n,cObj:r}};$("#tx-ecompc-package-select-index").hide(),ajaxCaller("#tx-ecompc-package-select-option-index:content","#tx-ecompc-ajax-loader",t,i,s)}),$("#tx-ecompc-ajax-header-backlink").on("click",function(e){e.preventDefault(),goBackToIndex()})})(jQuery);
